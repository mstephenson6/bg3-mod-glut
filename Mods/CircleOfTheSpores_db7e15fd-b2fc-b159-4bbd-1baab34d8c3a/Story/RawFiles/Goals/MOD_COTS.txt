Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
GetHostCharacter(_Player)
AND
UsingSpellOnTarget(_Player,(CHARACTER)_Corpse,"Target_AnimatingSpores",_,_,_)
THEN
AddPartyFollower(_Corpse,_Player);

IF
GetHostCharacter(_Player)
AND
UsingSpellOnTarget(_Player,(CHARACTER)_Corpse,"Target_AnimatingSpores",_,_,_)
THEN
DB_UND_NecroMushrooms_Corpse(_Corpse,_Player);

IF
GetHostCharacter(_Player)
AND
Dying(_Corpse)
AND
DB_UND_NecroMushrooms_Corpse(_Corpse,_Player)
AND
IsPartyMember(_Corpse,1,1)
THEN
RemovePartyFollower(_Corpse,_Player);

IF
GetHostCharacter(_Player)
AND
Died(_Corpse)
AND
DB_UND_NecroMushrooms_Corpse(_Corpse,_Player)
AND
IsPartyMember(_Corpse,1,1)
THEN
RemovePartyFollower(_Corpse,_Player);

IF
GetHostCharacter(_Player)
AND
DB_UND_NecroMushrooms_Corpse(_Corpse,_Player)
AND
IsPartyFollower(_Corpse,1)
AND
IsDead((CHARACTER)_Corpse, 1)
THEN
RemovePartyFollower(_Corpse,_Player);

// TODO 2024-11-02: Look into GLO_CombatNPCs
EXITSECTION

ENDEXITSECTION
